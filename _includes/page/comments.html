{% if jekyll.environment == 'production' and site.disqus.enabled %}
<div id="disqus_thread"></div>
<button class="button load-comments" onclick="load_comments(this)">
  Load Comments
</button>
<script>
var disqus_config = function() {
  this.page.url = '{{ site.url }}{{ page.url }}';
  this.page.identifier = '{{ page.id }}';
};
function load_comments(btn) {
  var d = document,
    s = d.createElement('script');
  s.async = true;
  s.src = '//{{ site.disqus.shortname }}.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  btn.parentNode.removeChild(btn);
  return false;
}
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
{% elsif jekyll.environment != 'production' and site.disqus.enabled %}
<p>Disqus comments will appear here, but have been disabled on non-production environments to avoid mis-indexing them with the non-production domain name.</p>
{% endif %}
